<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SpaceHeatMap</title>
    <!-- CSS se carga dinÃ¡micamente por el router -->
  </head>
  <body>
    <div class="space-heatmap-container">
      <!-- Header con estilo similar a user-activity -->
      <header class="app-header-card">
        <h1>
          <div id="header-banner-icon" style="
            display: inline-flex;
            align-items: center;
            vertical-align: middle;
            margin-right: 8px;
            width: 32px;
            height: 32px;
          ">
            <!-- SVG de Banner serÃ¡ insertado aquÃ­ -->
          </div>
          SpaceHeatMap
        </h1>
        <div class="app-header-controls">
          <div id="file-status-header" class="file-status-header">
            <span id="status-icon">ðŸ“Š</span>
            <span id="status-text">Cargando...</span>
          </div>
          <button id="refresh-space-btn" class="btn btn-primary" title="Recargar datos desde la red (Space_paths)">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <polyline points="1 20 1 14 7 14"></polyline>
              <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
            </svg>
            <span>Actualizar</span>
          </button>
        </div>
      </header>

      <!-- Contenido principal -->
      <div class="space-heatmap-content">
        <div id="status-message" class="status-message-banner" style="display: none"></div>

        <!-- KPIs Generales -->
        <div id="kpis-section" class="kpis-section" style="display: none">
          <div class="kpi-card">
            <div class="kpi-icon" id="kpi-icon-fullness">
              <!-- SVG de Fullness serÃ¡ insertado aquÃ­ -->
            </div>
            <div class="kpi-content">
              <div class="kpi-value" id="kpi-fullness-total">-</div>
              <div class="kpi-label">Fullness Total</div>
              <div class="kpi-subvalues">
                <span class="kpi-subvalue">
                  <span class="kpi-subvalue-label">Pick Tower:</span>
                  <span id="kpi-fullness-pick-tower">-</span>
                </span>
                <span class="kpi-subvalue">
                  <span class="kpi-subvalue-label">High Rack:</span>
                  <span id="kpi-fullness-high-rack">-</span>
                </span>
                <span class="kpi-subvalue">
                  <span class="kpi-subvalue-label">Pallet Land:</span>
                  <span id="kpi-fullness-pallet-land">-</span>
                </span>
              </div>
            </div>
          </div>
          <div class="kpi-card">
            <div class="kpi-icon" id="kpi-icon-units">
              <!-- SVG de Units serÃ¡ insertado aquÃ­ -->
            </div>
            <div class="kpi-content">
              <div class="kpi-value" id="kpi-total-units">-</div>
              <div class="kpi-label">Total Unidades</div>
              <div class="kpi-subvalues">
                <span class="kpi-subvalue">
                  <span class="kpi-subvalue-label">Pick Tower:</span>
                  <span id="kpi-units-pick-tower">-</span>
                </span>
                <span class="kpi-subvalue">
                  <span class="kpi-subvalue-label">High Rack:</span>
                  <span id="kpi-units-high-rack">-</span>
                </span>
                <span class="kpi-subvalue">
                  <span class="kpi-subvalue-label">Pallet Land:</span>
                  <span id="kpi-units-pallet-land">-</span>
                </span>
              </div>
            </div>
          </div>
          <div class="kpi-card">
            <div class="kpi-icon" id="kpi-icon-bins">
              <!-- SVG de Bins serÃ¡ insertado aquÃ­ -->
            </div>
            <div class="kpi-content">
              <div class="kpi-value" id="kpi-total-bins">-</div>
              <div class="kpi-label">Total Bins</div>
              <div class="kpi-subvalues">
                <span class="kpi-subvalue">
                  <span class="kpi-subvalue-label">Ocupados:</span>
                  <span id="kpi-occupied-bins">-</span>
                </span>
                <span class="kpi-subvalue">
                  <span class="kpi-subvalue-label">Bloqueados:</span>
                  <span id="kpi-locked-bins">-</span>
                </span>
              </div>
            </div>
          </div>
          <div class="kpi-card kpi-card-heatmap">
            <div class="kpi-icon" id="kpi-icon-heatmap-pt">
              <!-- SVG de Heatmap Pick Tower serÃ¡ insertado aquÃ­ -->
            </div>
            <div class="kpi-content">
              <div class="kpi-label">Heatmap Pick Tower</div>
              <div class="kpi-heatmap-buttons">
                <button class="kpi-heatmap-btn" data-heatmap="pick-tower-p1">
                  P1
                </button>
                <button class="kpi-heatmap-btn" data-heatmap="pick-tower-p2">
                  P2
                </button>
                <button class="kpi-heatmap-btn" data-heatmap="pick-tower-p3">
                  P3
                </button>
                <button class="kpi-heatmap-btn" data-heatmap="pick-tower-p4">
                  P4
                </button>
                <button class="kpi-heatmap-btn" data-heatmap="pick-tower-p5">
                  P5
                </button>
              </div>
            </div>
          </div>
          <div class="kpi-card kpi-card-heatmap">
            <div class="kpi-icon" id="kpi-icon-heatmap-hrk-pl">
              <!-- SVG de Heatmap High Rack & Pallet Land serÃ¡ insertado aquÃ­ -->
            </div>
            <div class="kpi-content">
              <div class="kpi-label">Heatmap High Rack & Pallet Land</div>
              <div class="kpi-heatmap-buttons">
                <button class="kpi-heatmap-btn" data-heatmap="high-rack">
                  High Rack
                </button>
                <button class="kpi-heatmap-btn" data-heatmap="pallet-land">
                  Pallet Land
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- SecciÃ³n de Tablas -->
        <div id="tables-section" class="tables-section" style="display: none">
          <!-- NavegaciÃ³n de tablas: Pick Tower, High Rack, Pallet Land -->
          <div class="table-navigation">
            <button class="table-nav-btn active" data-table="pick-tower">
              Pick Tower
            </button>
            <button class="table-nav-btn" data-table="high-rack">
              High Rack
            </button>
            <button class="table-nav-btn" data-table="pallet-land">
              Pallet Land
            </button>
          </div>

          <!-- Tabla: Fullness Pick Tower -->
          <div class="table-container" id="pick-tower-table-container">
            <table class="pick-tower-table">
                  <thead>
                    <tr>
                      <th class="floor-col">Floor</th>
                      <th>Total Floor</th>
                      <th>
                        <div class="header-with-icon">
                          <span>Zone 1</span>
                          <span class="zone-badge zone-badge-ob">OB</span>
                        </div>
                      </th>
                      <th>
                        <div class="header-with-icon">
                          <span>Zone 2</span>
                          <span class="zone-badge zone-badge-ib">IB</span>
                        </div>
                      </th>
                      <th>
                        <div class="header-with-icon">
                          <span>Library</span>
                          <div class="bintype-icon" id="library-icon">
                            <!-- SVG de Library serÃ¡ insertado aquÃ­ -->
                          </div>
                        </div>
                      </th>
                      <th>
                        <div class="header-with-icon">
                          <span>Half-Vertical</span>
                          <div class="bintype-icon" id="vertical-icon">
                            <!-- SVG de Vertical serÃ¡ insertado aquÃ­ -->
                          </div>
                        </div>
                      </th>
                      <th>
                        <div class="header-with-icon">
                          <span>Barrel</span>
                          <div class="bintype-icon" id="barrel-icon">
                            <!-- SVG de Barrel serÃ¡ insertado aquÃ­ -->
                          </div>
                        </div>
                      </th>
                      <th>
                        <div class="header-with-icon">
                          <span>BatBin</span>
                          <div class="bintype-icon" id="batbin-icon">
                            <!-- SVG de BatBin serÃ¡ insertado aquÃ­ -->
                          </div>
                        </div>
                      </th>
                      <th>
                        <div class="header-with-icon">
                          <span>Floor Pallet</span>
                          <div class="bintype-icon" id="floor-pallet-icon">
                            <!-- SVG de Floor Pallet serÃ¡ insertado aquÃ­ -->
                          </div>
                        </div>
                      </th>
                      <th>
                        <div class="header-with-icon">
                          <span>Pallet Single</span>
                          <div class="bintype-icon" id="pallet-single-icon">
                            <!-- SVG de Pallet Single serÃ¡ insertado aquÃ­ -->
                          </div>
                        </div>
                      </th>
                    </tr>
                  </thead>
                  <tbody id="pick-tower-table-body">
                    <!-- Se llena dinÃ¡micamente con los datos de fullness_by_bintype.json -->
                  </tbody>
                </table>
          </div>

          <!-- Tabla: High Rack -->
          <div class="table-container" id="high-rack-table-container" style="display: none;">
            <table class="pick-tower-table">
              <thead>
                <tr>
                  <th class="floor-col">Total</th>
                  <th>
                    <div class="header-with-icon">
                      <span>BatBin</span>
                      <div class="bintype-icon" id="hrk-batbin-icon">
                        <!-- SVG de BatBin serÃ¡ insertado aquÃ­ -->
                      </div>
                    </div>
                  </th>
                  <th>
                    <div class="header-with-icon">
                      <span>Cantilever</span>
                      <div class="bintype-icon" id="hrk-cantilever-icon">
                        <!-- SVG de Cantilever serÃ¡ insertado aquÃ­ -->
                      </div>
                    </div>
                  </th>
                  <th>
                    <div class="header-with-icon">
                      <span>Pass Through</span>
                      <div class="bintype-icon" id="hrk-passthrough-icon">
                        <!-- SVG de Pass Through serÃ¡ insertado aquÃ­ -->
                      </div>
                    </div>
                  </th>
                  <th>
                    <div class="header-with-icon">
                      <span>Floor Pallet</span>
                      <div class="bintype-icon" id="hrk-floor-pallet-icon">
                        <!-- SVG de Floor Pallet serÃ¡ insertado aquÃ­ -->
                      </div>
                    </div>
                  </th>
                  <th>
                    <div class="header-with-icon">
                      <span>Pallet Single</span>
                      <div class="bintype-icon" id="hrk-pallet-single-icon">
                        <!-- SVG de Pallet Single serÃ¡ insertado aquÃ­ -->
                      </div>
                    </div>
                  </th>
                </tr>
              </thead>
              <tbody id="high-rack-table-body">
                <!-- Se llena dinÃ¡micamente con los datos de Data_Fullness.json -->
              </tbody>
            </table>
          </div>

          <!-- Tabla: Pallet Land -->
          <div class="table-container" id="pallet-land-table-container" style="display: none;">
            <table class="pick-tower-table">
              <thead>
                <tr>
                  <th class="floor-col">Zona</th>
                  <th>Fullness</th>
                  <th>Total Bins</th>
                  <th>Occupied Bins</th>
                  <th>Empty Bins</th>
                </tr>
              </thead>
              <tbody id="pallet-land-table-body">
                <!-- Se llena dinÃ¡micamente con los datos de Data_Fullness.json -->
              </tbody>
            </table>
          </div>
          
          <!-- Separador: High Rack Pallet Single -->
          <div class="section-separator" id="hrk-pallet-single-separator" style="display: none;">
            <h3>High Rack Pallet Single</h3>
          </div>
          
          <!-- Tablas High Rack Pallet Single: Principal y Shelf lado a lado -->
          <div class="zone1-tables-container" id="hrk-pallet-single-tables-container" style="display: none;">
            <!-- Tabla Principal High Rack Pallet Single -->
            <div class="table-container zone1-main-table">
              <table class="pick-tower-table zone1-table">
                <thead>
                  <tr>
                    <th class="floor-col">Zona Pallet Single</th>
                    <th>Fullness</th>
                    <th>Empty</th>
                  </tr>
                </thead>
                <tbody id="hrk-pallet-single-table-body">
                  <!-- Se llena dinÃ¡micamente con los datos de Data_Fullness.json -->
                </tbody>
              </table>
            </div>
            
            <!-- Tabla Shelf A-G -->
            <div class="table-container zone1-shelf-table">
              <table class="pick-tower-table zone1-shelf-table-inner">
                <thead>
                  <tr>
                    <th colspan="7" class="shelf-table-header">
                      <div class="shelf-header-title">Shelf</div>
                      <div class="shelf-column-headers">
                        <div class="shelf-col-header shelf-col-a">
                          <div class="shelf-color-bar shelf-bar-a"></div>
                          <span>A</span>
                        </div>
                        <div class="shelf-col-header shelf-col-b">
                          <div class="shelf-color-bar shelf-bar-b"></div>
                          <span>B</span>
                        </div>
                        <div class="shelf-col-header shelf-col-c">
                          <div class="shelf-color-bar shelf-bar-c"></div>
                          <span>C</span>
                        </div>
                        <div class="shelf-col-header shelf-col-d">
                          <div class="shelf-color-bar shelf-bar-d"></div>
                          <span>D</span>
                        </div>
                        <div class="shelf-col-header shelf-col-e">
                          <div class="shelf-color-bar shelf-bar-e"></div>
                          <span>E</span>
                        </div>
                        <div class="shelf-col-header shelf-col-f">
                          <div class="shelf-color-bar shelf-bar-f"></div>
                          <span>F</span>
                        </div>
                        <div class="shelf-col-header shelf-col-g">
                          <div class="shelf-color-bar shelf-bar-g"></div>
                          <span>G</span>
                        </div>
                      </div>
                    </th>
                  </tr>
                </thead>
                <tbody id="hrk-pallet-single-shelf-table-body">
                  <!-- Se llena dinÃ¡micamente con los datos de Data_Fullness.json -->
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- Separador: Zone 1 - OB -->
          <div class="section-separator" id="zone1-separator">
            <h3>Zone 1 - OB</h3>
          </div>
          
          <!-- Tablas Zone 1: Principal y Library Shelf lado a lado -->
          <div class="zone1-tables-container" id="zone1-tables-container">
            <!-- Tabla Principal Zone 1 -->
            <div class="table-container zone1-main-table">
              <table class="pick-tower-table zone1-table">
                <thead>
                  <tr>
                    <th class="floor-col">Floor</th>
                    <th>
                      <div class="header-with-icon">
                        <span>Zone 1</span>
                        <span class="zone-badge zone-badge-ob">OB</span>
                      </div>
                    </th>
                    <th>
                      <div class="header-with-icon">
                        <span>Library</span>
                        <div class="bintype-icon" id="zone1-library-icon">
                          <!-- SVG de Library serÃ¡ insertado aquÃ­ -->
                        </div>
                      </div>
                    </th>
                    <th>
                      <div class="header-with-icon">
                        <span>Half-Vertical</span>
                        <div class="bintype-icon" id="zone1-vertical-icon">
                          <!-- SVG de Vertical serÃ¡ insertado aquÃ­ -->
                        </div>
                      </div>
                    </th>
                    <th>
                      <div class="header-with-icon">
                        <span>Barrel</span>
                        <div class="bintype-icon" id="zone1-barrel-icon">
                          <!-- SVG de Barrel serÃ¡ insertado aquÃ­ -->
                        </div>
                      </div>
                    </th>
                    <th>
                      <div class="header-with-icon">
                        <span>BatBin</span>
                        <div class="bintype-icon" id="zone1-batbin-icon">
                          <!-- SVG de BatBin serÃ¡ insertado aquÃ­ -->
                        </div>
                      </div>
                    </th>
                    <th>
                      <div class="header-with-icon">
                        <span>Floor Pallet</span>
                        <div class="bintype-icon" id="zone1-floor-pallet-icon">
                          <!-- SVG de Floor Pallet serÃ¡ insertado aquÃ­ -->
                        </div>
                      </div>
                    </th>
                    <th>
                      <div class="header-with-icon">
                        <span>Pallet Single</span>
                        <div class="bintype-icon" id="zone1-pallet-single-icon">
                          <!-- SVG de Pallet Single serÃ¡ insertado aquÃ­ -->
                        </div>
                      </div>
                    </th>
                  </tr>
                </thead>
                <tbody id="zone1-table-body">
                  <!-- Se llena dinÃ¡micamente con los datos de Data_Fullness.json -->
                </tbody>
              </table>
            </div>
            
            <!-- Tabla Library Shelf -->
            <div class="table-container zone1-shelf-table">
              <table class="pick-tower-table zone1-shelf-table-inner">
                <thead>
                  <tr>
                    <th colspan="4" class="shelf-table-header">
                      <div class="shelf-header-title">Library Shelf</div>
                      <div class="shelf-column-headers">
                        <div class="shelf-col-header shelf-col-a">
                          <div class="shelf-color-bar shelf-bar-a"></div>
                          <span>A</span>
                        </div>
                        <div class="shelf-col-header shelf-col-b">
                          <div class="shelf-color-bar shelf-bar-b"></div>
                          <span>B</span>
                        </div>
                        <div class="shelf-col-header shelf-col-c">
                          <div class="shelf-color-bar shelf-bar-c"></div>
                          <span>C</span>
                        </div>
                        <div class="shelf-col-header shelf-col-d">
                          <div class="shelf-color-bar shelf-bar-d"></div>
                          <span>D</span>
                        </div>
                      </div>
                    </th>
                  </tr>
                </thead>
                <tbody id="zone1-shelf-table-body">
                  <!-- Se llena dinÃ¡micamente con los datos de Data_Fullness.json -->
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- Separador: Zone 2 - IB -->
          <div class="section-separator" id="zone2-separator">
            <h3>Zone 2 - IB</h3>
          </div>
          
          <!-- Tablas Zone 2: Principal y Library Shelf lado a lado -->
          <div class="zone1-tables-container" id="zone2-tables-container">
            <!-- Tabla Principal Zone 2 -->
            <div class="table-container zone1-main-table">
              <table class="pick-tower-table zone2-table">
                <thead>
                  <tr>
                    <th class="floor-col">Floor</th>
                    <th>
                      <div class="header-with-icon">
                        <span>Zone 2</span>
                        <span class="zone-badge zone-badge-ib">IB</span>
                      </div>
                    </th>
                    <th>
                      <div class="header-with-icon">
                        <span>Library</span>
                        <div class="bintype-icon" id="zone2-library-icon">
                          <!-- SVG de Library serÃ¡ insertado aquÃ­ -->
                        </div>
                      </div>
                    </th>
                    <th>
                      <div class="header-with-icon">
                        <span>Half-Vertical</span>
                        <div class="bintype-icon" id="zone2-vertical-icon">
                          <!-- SVG de Vertical serÃ¡ insertado aquÃ­ -->
                        </div>
                      </div>
                    </th>
                    <th>
                      <div class="header-with-icon">
                        <span>Barrel</span>
                        <div class="bintype-icon" id="zone2-barrel-icon">
                          <!-- SVG de Barrel serÃ¡ insertado aquÃ­ -->
                        </div>
                      </div>
                    </th>
                    <th>
                      <div class="header-with-icon">
                        <span>BatBin</span>
                        <div class="bintype-icon" id="zone2-batbin-icon">
                          <!-- SVG de BatBin serÃ¡ insertado aquÃ­ -->
                        </div>
                      </div>
                    </th>
                    <th>
                      <div class="header-with-icon">
                        <span>Floor Pallet</span>
                        <div class="bintype-icon" id="zone2-floor-pallet-icon">
                          <!-- SVG de Floor Pallet serÃ¡ insertado aquÃ­ -->
                        </div>
                      </div>
                    </th>
                    <th>
                      <div class="header-with-icon">
                        <span>Pallet Single</span>
                        <div class="bintype-icon" id="zone2-pallet-single-icon">
                          <!-- SVG de Pallet Single serÃ¡ insertado aquÃ­ -->
                        </div>
                      </div>
                    </th>
                  </tr>
                </thead>
                <tbody id="zone2-table-body">
                  <!-- Se llena dinÃ¡micamente con los datos de Data_Fullness.json -->
                </tbody>
              </table>
            </div>
            
            <!-- Tabla Library Shelf Zone 2 -->
            <div class="table-container zone1-shelf-table">
              <table class="pick-tower-table zone1-shelf-table-inner">
                <thead>
                  <tr>
                    <th colspan="4" class="shelf-table-header">
                      <div class="shelf-header-title">Library Shelf</div>
                      <div class="shelf-column-headers">
                        <div class="shelf-col-header shelf-col-a">
                          <div class="shelf-color-bar shelf-bar-a"></div>
                          <span>A</span>
                        </div>
                        <div class="shelf-col-header shelf-col-b">
                          <div class="shelf-color-bar shelf-bar-b"></div>
                          <span>B</span>
                        </div>
                        <div class="shelf-col-header shelf-col-c">
                          <div class="shelf-color-bar shelf-bar-c"></div>
                          <span>C</span>
                        </div>
                        <div class="shelf-col-header shelf-col-d">
                          <div class="shelf-color-bar shelf-bar-d"></div>
                          <span>D</span>
                        </div>
                      </div>
                    </th>
                  </tr>
                </thead>
                <tbody id="zone2-shelf-table-body">
                  <!-- Se llena dinÃ¡micamente con los datos de Data_Fullness.json -->
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Modal de Heatmap -->
        <div id="heatmap-modal" class="modal-overlay" style="display: none">
          <div class="modal-content heatmap-modal-content">
            <!-- Ãrea superior (10%): Header + Filtros -->
            <div class="heatmap-top-section">
              <div class="modal-header">
                <h3 id="heatmap-modal-title">Heatmap</h3>
                <button id="close-heatmap-modal-btn" class="modal-close-btn">
                  &times;
                </button>
              </div>
              <!-- Controles/Filtros -->
              <div class="heatmap-controls">
                <div class="heatmap-control-group">
                  <label>
                    <input type="checkbox" id="show-locked-bins" checked>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2"/>
                      <path d="M8 12L11 15L16 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Mostrar bins bloqueadas
                  </label>
                </div>
                <div class="heatmap-control-group">
                  <label>Filtrar por tipo de bin:</label>
                  <select id="bin-type-filter">
                    <option value="all">Todos los tipos</option>
                    <option value="HALF-VERTICAL">Half-Vertical</option>
                    <option value="LIBRARY-DEEP">Library</option>
                    <option value="BARREL">Barrel</option>
                    <option value="BATBIN">BatBin</option>
                    <option value="FLOOR-PALLET">Floor Pallet</option>
                    <option value="PALLET-SINGLE">Pallet Single</option>
                  </select>
                </div>
                <div class="heatmap-control-group">
                  <label>
                    <input type="range" id="fullness-range" min="0" max="100" value="100" step="1">
                    <span id="fullness-range-value">100%</span> mÃ¡ximo (ocultar lo mÃ¡s lleno)
                  </label>
                </div>
                <div class="heatmap-control-group">
                  <button id="reset-heatmap-filters" class="btn btn-secondary btn-small">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Resetear filtros
                  </button>
                </div>
              </div>
            </div>
            <!-- Ãrea central (80%): Mapa SVG -->
            <div class="heatmap-viewer-container">
              <div id="heatmap-viewer" class="heatmap-viewer">
                <!-- El SVG del heatmap se cargarÃ¡ aquÃ­ -->
              </div>
            </div>
            <!-- Ãrea inferior (10%): Parte interactiva completa - 3 columnas -->
            <div class="heatmap-bottom-section">
              <!-- Columna 1: Info de Zona -->
              <div class="heatmap-stats-column">
                <div class="heatmap-info">
                  <div id="heatmap-stats">
                    <span id="total-elements">Total: 0</span>
                    <span id="visible-elements">Visibles: 0</span>
                    <span id="locked-elements">Bloqueadas: 0</span>
                    <span id="low-fullness-count">Zonas bajas (â‰¤60%): 0</span>
                  </div>
                </div>
              </div>
              <!-- Columna 2: Info interactiva -->
              <div id="hover-info" class="hover-info">
                <div class="hover-info-placeholder">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <span>Pasa el mouse sobre un elemento del mapa para ver informaciÃ³n detallada</span>
                </div>
                <div id="hover-info-content" class="hover-info-content" style="display: none;">
                  <div class="hover-info-row">
                    <div class="hover-info-item">
                      <span class="hover-info-label">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M3 3H21V21H3V3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                          <path d="M9 3V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Pasillo:
                      </span>
                      <span id="hover-aisle" class="hover-info-value">â€”</span>
                    </div>
                    <div class="hover-info-item">
                      <span class="hover-info-label">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Fullness Pasillo:
                      </span>
                      <span id="hover-aisle-fullness" class="hover-info-value">â€”</span>
                    </div>
                    <div class="hover-info-item">
                      <span class="hover-info-label">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                          <path d="M9 9H15V15H9V9Z" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Fullness Bay:
                      </span>
                      <span id="hover-bay-fullness" class="hover-info-value">â€”</span>
                    </div>
                    <div class="hover-info-item">
                      <span class="hover-info-label">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M20 7H4C2.89543 7 2 7.89543 2 9V19C2 20.1046 2.89543 21 4 21H20C21.1046 21 22 20.1046 22 19V9C22 7.89543 21.1046 7 20 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                          <path d="M16 21V5C16 4.46957 15.7893 3.96086 15.4142 3.58579C15.0391 3.21071 14.5304 3 14 3H10C9.46957 3 8.96086 3.21071 8.58579 3.58579C8.21071 3.96086 8 4.46957 8 5V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Bin Type:
                      </span>
                      <span id="hover-bin-type" class="hover-info-value">â€”</span>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Columna 3: NÃºmero pasillo grande -->
              <div id="aisle-display" class="aisle-display">
                <div class="aisle-display-icon">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 3H21V21H3V3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M9 3V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M15 3V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="aisle-display-text">
                  <span class="aisle-label">Pasillo</span>
                  <span id="aisle-number" class="aisle-number">â€”</span>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </body>
</html>
