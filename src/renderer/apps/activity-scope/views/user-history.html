<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User History - Activity Scope</title>
    <!-- CSS se carga din谩micamente por el router -->
  </head>
  <body>
    <div class="user-history-container">
      <!-- Header compacto -->
      <header class="app-header-card">
        <h1>
          <span id="icon-history-header" class="icon-svg icon-32"></span>
          User History
        </h1>
        <div class="app-header-controls">
          <button id="refresh-history" class="btn btn-primary">
            <span id="icon-refresh-history" class="icon-svg icon-16"></span>
            Actualizar
          </button>
        </div>
      </header>

      <!-- Barra de filtros -->
      <div class="user-history-filters-compact">
        <div class="filters-row">
          <div class="filter-item filter-item-search">
            <label for="history-user-search">Buscar por Login:</label>
            <input
              type="text"
              id="history-user-search"
              class="form-control compact search-input"
              placeholder="Escribe el login..."
              autocomplete="off"
            />
            <label class="checkbox-inline">
              <input type="checkbox" id="history-only-active" checked />
              Solo Activos
            </label>
            <div id="user-search-suggestions" class="search-suggestions" style="display: none;"></div>
          </div>
          <div class="filter-item">
            <label for="history-shift-filter">Turno:</label>
            <select id="history-shift-filter" class="form-control compact">
              <option value="">Todos</option>
            </select>
          </div>
          <div class="filter-item">
            <label for="history-manager-filter">Manager:</label>
            <select id="history-manager-filter" class="form-control compact">
              <option value="">Todos</option>
            </select>
          </div>
          <div class="filter-item filter-item-user">
            <label for="history-user-select">Usuario:</label>
            <select id="history-user-select" class="form-control compact">
              <option value="">-- Seleccionar --</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Contenedor principal para ficha de usuario y m茅tricas -->
      <div id="selected-user-container" class="selected-user-container" style="display: none;">
        <!-- Ficha usuario (columna izquierda) -->
        <div id="selected-user-info-card" class="selected-user-info-card">
          <div class="user-info-photo-section">
            <div class="user-photo-large" id="selected-user-photo">
              <!-- Foto se cargar谩 din谩micamente -->
            </div>
          </div>
          <div class="user-info-details-section">
            <div class="user-info-row">
              <span class="user-info-label">Login:</span>
              <span class="user-info-value" id="selected-user-login">-</span>
            </div>
            <div class="user-info-row">
              <span class="user-info-label">Nombre:</span>
              <span class="user-info-value" id="selected-user-name">-</span>
            </div>
            <div class="user-info-row">
              <span class="user-info-label">Turno:</span>
              <span class="user-info-value" id="selected-user-shift">-</span>
            </div>
            <div class="user-info-row">
              <span class="user-info-label">Manager:</span>
              <span class="user-info-value" id="selected-user-manager">-</span>
            </div>
          </div>
        </div>

        <!-- Panel de m茅tricas (columna derecha) -->
        <div class="user-metrics-panel">
          <h4 class="metrics-panel-title">M茅tricas por Per铆odo</h4>
          <table class="user-metrics-table">
            <thead>
              <tr>
                <th class="metric-period-header">Per铆odo</th>
                <th class="metric-type-header">Art铆culos</th>
                <th class="metric-type-header">Horas</th>
                <th class="metric-type-header">Rank</th>
                <th class="metric-type-header">Rate</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="metric-period-label">Semana</td>
                <td class="metric-value-cell" id="metric-units-week">-</td>
                <td class="metric-value-cell" id="metric-hours-week">-</td>
                <td class="metric-value-cell" id="metric-rank-week">-</td>
                <td class="metric-value-cell" id="metric-rate-week">-</td>
              </tr>
              <tr>
                <td class="metric-period-label">Mes</td>
                <td class="metric-value-cell" id="metric-units-month">-</td>
                <td class="metric-value-cell" id="metric-hours-month">-</td>
                <td class="metric-value-cell" id="metric-rank-month">-</td>
                <td class="metric-value-cell" id="metric-rate-month">-</td>
              </tr>
              <tr>
                <td class="metric-period-label">3 Meses</td>
                <td class="metric-value-cell" id="metric-units-3months">-</td>
                <td class="metric-value-cell" id="metric-hours-3months">-</td>
                <td class="metric-value-cell" id="metric-rank-3months">-</td>
                <td class="metric-value-cell" id="metric-rate-3months">-</td>
              </tr>
              <tr>
                <td class="metric-period-label">6 Meses</td>
                <td class="metric-value-cell" id="metric-units-6months">-</td>
                <td class="metric-value-cell" id="metric-hours-6months">-</td>
                <td class="metric-value-cell" id="metric-rank-6months">-</td>
                <td class="metric-value-cell" id="metric-rate-6months">-</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Gr谩ficos de Evoluci贸n Temporal (arriba) -->
      <div class="user-history-charts-section">
        <h3 class="charts-section-title"> Evoluci贸n Temporal del Rendimiento</h3>
        
        <!-- Gr谩ficos principales juntos: Rate, Percentil y Rate por Esfuerzo -->
        <div class="user-history-charts-primary">
          <!-- Gr谩fico 1: Evoluci贸n Rate vs Promedio (L铆nea Temporal) -->
          <div class="user-history-chart-container">
            <h4 class="chart-title">Evoluci贸n del Rate: Usuario vs Promedio General</h4>
            <div id="rate-evolution-chart" class="user-history-chart">
              <div style="padding: 20px; text-align: center; color: #666">
                <p>Selecciona un usuario para ver la evoluci贸n</p>
              </div>
            </div>
          </div>

          <!-- Gr谩fico 2: Evoluci贸n del Percentil -->
          <div class="user-history-chart-container">
            <h4 class="chart-title">Evoluci贸n del Percentil</h4>
            <div id="percentile-evolution-chart" class="user-history-chart">
              <div style="padding: 20px; text-align: center; color: #666">
                <p>Evoluci贸n del percentil</p>
              </div>
            </div>
          </div>

          <!-- Gr谩fico 3: Evoluci贸n del Rate por Esfuerzo -->
          <div class="user-history-chart-container">
            <h4 class="chart-title">Evoluci贸n del Rate por Esfuerzo</h4>
            <div id="effort-rate-evolution-chart" class="user-history-chart">
              <div style="padding: 20px; text-align: center; color: #666">
                <p>Evoluci贸n del rate por esfuerzo</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Gr谩ficos Stow to Prime y Transfer In (mismo estilo que evoluci贸n temporal) -->
        <div class="user-history-charts-primary">
          <div class="user-history-chart-container">
            <h4 class="chart-title">Evoluci贸n Stow to Prime: Usuario vs Promedio</h4>
            <div id="stp-evolution-chart" class="user-history-chart">
              <div style="padding: 20px; text-align: center; color: #666">
                <p>Selecciona un usuario para ver la evoluci贸n</p>
              </div>
            </div>
          </div>
          <div class="user-history-chart-container">
            <h4 class="chart-title">Evoluci贸n Transfer In (TSI): Usuario vs Promedio</h4>
            <div id="tsi-evolution-chart" class="user-history-chart">
              <div style="padding: 20px; text-align: center; color: #666">
                <p>Selecciona un usuario para ver la evoluci贸n</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="../js/user-history.js"></script>
  </body>
</html>

