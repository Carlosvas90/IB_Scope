<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pizarra - Gesti칩n de Puestos</title>
    <!-- CSS se carga din치micamente por el router -->
  </head>
  <body>
    <div class="pizarra-container">
      <!-- Header -->
      <header class="app-header-card">
        <h1>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            style="
              display: inline-flex;
              align-items: center;
              vertical-align: middle;
              margin-right: 8px;
            "
          >
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
          </svg>
          Pizarra - Gesti칩n de Puestos
        </h1>
        <div class="app-header-controls">
          <button id="btn-generar-skillmatrix" class="btn btn-secondary btn-sm" title="Generar skillmatrix desde roster">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
              <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
              <line x1="12" y1="22.08" x2="12" y2="12"></line>
            </svg>
            Generar SkillMatrix
          </button>
          <div id="file-status-header" class="file-status-header">
            <span id="status-icon">游늵</span>
            <span id="status-text">Cargando...</span>
          </div>
        </div>
      </header>

      <!-- Contenido principal -->
      <div class="pizarra-content">
        <!-- 츼rea de escaneo -->
        <div class="scanning-section">
          <div class="scan-card">
            <div class="scan-header">
              <h2>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="9" y1="3" x2="9" y2="21"></line>
                </svg>
                Escaneo de Puestos y Usuarios
              </h2>
            </div>
            <div class="scan-content">
              <div class="scan-step">
                <label>Escanear Puesto o Usuario:</label>
                <div class="input-group">
                  <input
                    type="text"
                    id="scan-input"
                    placeholder="Escanea QR o escribe (Puesto primero, luego Usuario)"
                    autocomplete="off"
                  />
                  <button id="btn-agregar-puesto" class="btn-icon" title="Agregar puesto personalizado">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <line x1="12" y1="5" x2="12" y2="19"></line>
                      <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                  </button>
                </div>
                <div id="scan-info" class="info-display"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Dashboard -->
        <div class="dashboard-section">
          <div class="dashboard-header">
            <h2>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <rect x="3" y="3" width="7" height="7"></rect>
                <rect x="14" y="3" width="7" height="7"></rect>
                <rect x="14" y="14" width="7" height="7"></rect>
                <rect x="3" y="14" width="7" height="7"></rect>
              </svg>
              Dashboard de Asignaciones
            </h2>
            <div class="dashboard-stats">
              <div class="stat-item">
                <span class="stat-label">Total Asignados:</span>
                <span class="stat-value" id="total-asignados">0</span>
              </div>
            </div>
          </div>
          <div id="dashboard-content" class="dashboard-content">
            <!-- Se generar치 din치micamente -->
          </div>
        </div>
      </div>
    </div>

    <!-- Modal: Agregar Puesto Personalizado -->
    <div id="modal-puesto-personalizado" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Agregar Puesto Personalizado</h3>
          <button class="modal-close" id="close-modal-puesto">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Nombre del Puesto:</label>
            <input type="text" id="puesto-nombre-input" placeholder="Ej: Ayudante MAD7" />
          </div>
          <div class="form-group">
            <label>Departamento Principal:</label>
            <select id="puesto-depto-principal">
              <option value="Inbound">Inbound</option>
              <option value="Outbound">Outbound</option>
              <option value="ICQA">ICQA</option>
              <option value="Otro">Otro</option>
            </select>
          </div>
          <div class="form-group">
            <label>Departamento Secundario:</label>
            <input type="text" id="puesto-depto-secundario" placeholder="Ej: Stow, Pick, etc." />
          </div>
          <div class="form-group">
            <label>Funci칩n:</label>
            <input type="text" id="puesto-funcion" placeholder="Ej: Ayudante MAD7" />
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="cancel-puesto">Cancelar</button>
          <button class="btn btn-primary" id="save-puesto">Guardar</button>
        </div>
      </div>
    </div>

    <!-- Modal: Alerta Skill Matrix -->
    <div id="modal-skill-alert" class="modal" style="display: none;">
      <div class="modal-content modal-alert">
        <div class="modal-header">
          <h3>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
              <line x1="12" y1="9" x2="12" y2="13"></line>
              <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
            Alerta: Formaci칩n No Verificada
          </h3>
        </div>
        <div class="modal-body">
          <p id="skill-alert-message"></p>
          <div class="form-group">
            <label>
              <input type="checkbox" id="confirm-skill-checkbox" />
              Confirmar que el usuario tiene formaci칩n para este puesto
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="cancel-skill">Cancelar</button>
          <button class="btn btn-primary" id="confirm-skill">Confirmar y Asignar</button>
        </div>
      </div>
    </div>

    <!-- Modal: Cambio de Puesto -->
    <div id="modal-cambio-puesto" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Cambio de Puesto</h3>
        </div>
        <div class="modal-body">
          <p id="cambio-puesto-message"></p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="cancel-cambio">Cancelar</button>
          <button class="btn btn-primary" id="confirm-cambio">Mover a Nuevo Puesto</button>
        </div>
      </div>
    </div>

    <!-- Modal: Agregar Usuario a Puesto -->
    <div id="modal-agregar-usuario" class="modal" style="display: none;">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h3>Agregar Personal a <span id="puesto-nombre-modal"></span></h3>
          <button class="modal-close" id="close-modal-agregar-usuario">&times;</button>
        </div>
        <div class="modal-body">
          <div class="search-box">
            <input type="text" id="search-usuario-input" placeholder="Buscar usuario..." autocomplete="off" />
          </div>
          <div id="usuarios-disponibles-list" class="usuarios-disponibles-list">
            <!-- Se llenar치 din치micamente -->
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="cancel-agregar-usuario">Cancelar</button>
        </div>
      </div>
    </div>

    <!-- Modal: Skill Matrix del Usuario -->
    <div id="modal-skill-matrix" class="modal" style="display: none;">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h3>Formaciones de <span id="usuario-nombre-skill"></span></h3>
          <button class="modal-close" id="close-modal-skill-matrix">&times;</button>
        </div>
        <div class="modal-body">
          <div id="skill-matrix-content" class="skill-matrix-content">
            <!-- Se llenar치 din치micamente -->
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="cancel-skill-matrix">Cerrar</button>
          <button class="btn btn-primary" id="save-skill-matrix">Guardar Cambios</button>
        </div>
      </div>
    </div>

    <!-- Notificaci칩n Toast -->
    <div id="toast-notification" class="toast" style="display: none;"></div>

    <!-- Script principal -->
    <script type="module" src="js/pizarra.js"></script>
    
    <!-- Cerrar men칰s al hacer click fuera -->
    <script>
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.usuario-menu-container')) {
          document.querySelectorAll('.usuario-menu').forEach(menu => {
            menu.style.display = 'none';
          });
        }
      });
    </script>
  </body>
</html>
